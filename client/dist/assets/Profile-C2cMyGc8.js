import{c as n,r as o,u,j as e,a as g}from"./index-DUBQGg9L.js";import{a as m}from"./axios-Cm0UX6qg.js";/**
 * @license lucide-react v0.370.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=n("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.370.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=n("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.370.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=n("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),k=()=>{const[l,x]=o.useState(null),[c,h]=o.useState([]),{logout:p,user:s}=u(),d=async()=>{var a,t,i;try{const r=await m.get(`https://movieguys.onrender.com/user/get-posts/${s==null?void 0:s.user._id}`,{headers:{Authorization:`Bearer ${s==null?void 0:s.token}`}});o.startTransition(()=>{h(r.data.posts.reverse())})}catch(r){console.log((a=r==null?void 0:r.response)==null?void 0:a.data),(i=(t=r.response)==null?void 0:t.data)!=null&&i.redirect&&p()}};o.useEffect(()=>{d()},[]);const f=async a=>{try{await m.delete(`http://localhost:5000/user/delete-post/${a}`,{headers:{Authorization:`Bearer ${s==null?void 0:s.token}`}}),d()}catch(t){console.log(t)}};return e.jsxs("div",{className:"w-full min-h-screen dark:bg-gray-900 px-12 max-md:px-3 pt-20 text-white",children:[e.jsxs("div",{className:"w-full bg-gray-800 my-5 h-28 flex flex-col items-center justify-evenly",children:[e.jsx("h1",{className:"text-3xl font-bold",children:s==null?void 0:s.user.username}),e.jsxs("p",{className:"text-lg",children:[e.jsx("span",{className:"text-xl font-bold mr-2",children:c.length}),"Posts"]})]}),e.jsx("div",{className:"w-full flex flex-col gap-5 items-center ",children:c.map((a,t)=>e.jsxs("div",{className:`relative w-full max-md:flex-col flex justify-between items-center border-2 bg-gray-800/40 border-black/30 shadow-md max-md:p-3 p-10 ${t%2!==0?"flex-row-reverse":"flex-row"}`,children:[e.jsx("img",{src:a.image,alt:"",className:"h-auto w-1/3 max-md:w-full"}),e.jsxs("div",{className:" w-2/3 flex flex-col max-md:items-center gap-5 p-10 max-md:p-0 max-md:w-full",children:[e.jsx(y,{onClick:()=>x(l===t?null:t),className:`ml-auto max-md:bg-black/70 max-md:h-6 max-md:w-6 cursor-pointer h-10 w-10 absolute top-5 ${t%2===0?"right-5":"left-5"} ${l===t&&"rotate-180"}`}),e.jsx("h1",{className:"text-2xl max-md:text-lg max-md:mt-5 font-bold uppercase ",children:a.title}),e.jsx("p",{hidden:l!==t,className:"text-xl font-thin",children:a.desc}),e.jsx("p",{hidden:l!==t,children:a.content}),e.jsxs("p",{className:"italic text-white/60",children:["movie : ",e.jsx("span",{className:"font-bold capitalize",children:a.movie})]}),e.jsxs("div",{className:"flex gap-5 max-md:justify-evenly",children:[e.jsx(g,{to:`/edit-post/${a._id}`,children:e.jsxs("button",{type:"submit",className:"w-fit px-10 max-md:p-3 max-md:h-fit flex items-center justify-center gap-3 text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm  py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:[e.jsx(j,{})," Edit Post"]})}),e.jsxs("button",{onClick:()=>f(a._id),type:"submit",className:"w-fit max-md:p-3 max-md:h-fit px-10 flex items-center justify-center gap-2 text-white bg-red-600 hover:bg-red-700 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm  py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800",children:[e.jsx(v,{})," Delete Post"]})]})]})]},t))})]})};export{k as default};
