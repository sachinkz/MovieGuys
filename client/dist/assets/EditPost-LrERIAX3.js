import{r as h,a as v,u as w,b as N,j as e}from"./index-CrrZELZ4.js";import{a as c}from"./axios-Cm0UX6qg.js";import{u as q}from"./index.esm-B31c06Ro.js";import{L}from"./loader-D3tcygI3.js";import{C as F}from"./camera-off-Bsphu2e-.js";import"./createLucideIcon-D8nnC9Vr.js";const A=()=>{var g,p,x,b;const y=q(),{register:d,handleSubmit:f,formState:o,setValue:l}=y,[a,m]=h.useState(null),n=v(),{user:u}=w(),i=N();h.useEffect(()=>{(async()=>{i!=null&&i.postId||n("/");try{const r=await c.get(`https://movieguys.onrender.com/user/get-post/${i.postId}`,{headers:{Authorization:`Bearer ${u.token}`}});if(r.data){const t=r.data.post;l("movie",t.movie),l("desc",t.desc),l("title",t.title),l("content",t.content),m(t.image)}}catch(r){console.log(r)}})()},[]);const k=async r=>{let t;if(typeof a!="string"){const s=new FormData;s.append("file",a),s.append("upload_preset","pca6lohi");try{t=await c.post("https://api.cloudinary.com/v1_1/djyqjmd1o/image/upload/",s),console.log(t.data)}catch(j){console.log(j)}}r.image=t?t.data.secure_url:a,r.postId=i.postId;try{(await c.put("https://movieguys.onrender.com/user/edit-post",r,{headers:{Authorization:`Bearer ${u.token} `}})).data&&n("/")}catch(s){console.log(s)}};return e.jsxs("div",{className:"w-full min-h-screen px-10 flex bg-gray-800 pt-24 text-white",children:[o.isSubmitting&&e.jsx("div",{className:"absolute w-full h-screen flex justify-center items-center top-0 left-0 bg-[#00000050]",children:e.jsx(L,{className:"h-28 w-28 animate-spin"})}),e.jsx("div",{className:"w-1/2 flex justify-center items-center pr-10",children:a?e.jsx("div",{children:e.jsx("img",{src:typeof a=="string"?a:URL.createObjectURL(a),alt:"",className:"max-h-screen"})}):e.jsx(F,{className:"h-36 w-36 opacity-25"})}),e.jsxs("form",{className:"space-y-4 md:space-y-6 w-1/2",action:"#",onSubmit:f(k),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"moviename",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Movie Name"}),e.jsx("input",{...d("movie",{required:{value:!0,message:"Please enter a movie name"},maxLength:{value:60,message:"Must not exceed 60 characters"}}),type:"text",id:"movie",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Oppenheimer",required:""}),e.jsx("p",{className:"text-red-500 text-sm mt-2",children:(g=o.errors.movie)==null?void 0:g.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Title"}),e.jsx("input",{...d("title",{required:{value:!0,message:"Please enter your title"},maxLength:{value:100,message:"Must not exceed 100 characters"}}),type:"text",id:"title",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Title of your post",required:""}),e.jsx("p",{className:"text-red-500 text-sm mt-2",children:(p=o.errors.title)==null?void 0:p.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Image"}),e.jsx("input",{onChange:r=>m(r.target.files[0]),type:"file",accept:".jpg, .png, .jpeg",id:"image",placeholder:"image-file",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Description"}),e.jsx("textarea",{...d("desc",{required:{value:!0,message:"Please enter a description"},maxLength:{value:300,message:"Must not exceed 300 characters"}}),type:"text",id:"description",placeholder:"blog description",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""}),e.jsx("p",{className:"text-red-500 text-sm mt-2",children:(x=o.errors.desc)==null?void 0:x.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Content"}),e.jsx("textarea",{...d("content",{required:{value:!0,message:"Please enter your content"},maxLength:{value:1e3,message:"Must not exceed 1000 characters"}}),type:"text",name:"content",id:"content",placeholder:"Blog Content",className:"bg-gray-50 border border-gray-300 h-28 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""}),e.jsx("p",{className:"text-red-500 text-sm mt-2",children:(b=o.errors.content)==null?void 0:b.message})]}),e.jsx("button",{type:"submit",className:"w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Update Post"})]})]})};export{A as default};
