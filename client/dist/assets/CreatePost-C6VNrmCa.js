import{r as i,b as v,u as w,j as e,L as N}from"./index-DUBQGg9L.js";import{a as x}from"./axios-Cm0UX6qg.js";import{u as q}from"./index.esm-D_EkCCYt.js";import{C as L}from"./camera-off-CxGTPqwL.js";const S=()=>{var c,n,u,g;const p=q(),{register:a,handleSubmit:b,formState:r}=p,[t,h]=i.useState(null),[m,y]=i.useState(""),f=v(),{user:k}=w(),j=async s=>{if(!t){y("Please add an image");return}const l=new FormData;l.append("file",t),l.append("upload_preset","pca6lohi");let d;try{d=await x.post("https://api.cloudinary.com/v1_1/djyqjmd1o/image/upload/",l)}catch(o){console.log(o)}if(d.data){s.image=d.data.secure_url;try{(await x.post("https://movieguys.onrender.com/user/create-post",s,{headers:{Authorization:`Bearer ${k.token}`}})).data&&i.startTransition(()=>{f("/")})}catch(o){console.log(o)}}};return e.jsxs("div",{className:"w-full min-h-screen px-10 max-md:px-5 pb-10 flex max-md:flex-col max-md:gap-10 bg-gray-800 pt-24 text-white",children:[r.isSubmitting&&e.jsx("div",{className:"absolute w-full h-screen flex justify-center items-center top-0 left-0 bg-[#00000050]",children:e.jsx(N,{className:"h-28 w-28 animate-spin"})}),e.jsx("div",{className:"w-1/2 max-md:w-full flex justify-center items-center max-md:pr-0 pr-10",children:t?e.jsx("div",{children:e.jsx("img",{src:URL.createObjectURL(t),alt:"",className:"max-h-screen"})}):e.jsx(L,{className:"h-36 w-36 opacity-25"})}),e.jsxs("form",{className:"md:space-y-6 w-1/2 max-md:w-full",action:"#",onSubmit:b(j),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"moviename",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Movie Name"}),e.jsx("input",{...a("movie",{required:{value:!0,message:"Please enter a movie name"},maxLength:{value:60,message:"Must not exceed 60 characters"}}),type:"text",id:"movie",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Oppenheimer",required:""}),e.jsx("p",{className:"text-red-500 text-sm mt-2",children:(c=r.errors.movie)==null?void 0:c.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Title"}),e.jsx("input",{...a("title",{required:{value:!0,message:"Please enter your title"},maxLength:{value:100,message:"Must not exceed 100 characters"}}),type:"text",id:"title",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Title of your post",required:""}),e.jsx("p",{className:"text-red-500 text-sm mt-2",children:(n=r.errors.title)==null?void 0:n.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"image",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Image"}),e.jsx("input",{onChange:s=>h(s.target.files[0]),type:"file",accept:".jpg, .png, .jpeg",id:"image",placeholder:"image-file",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""}),!t&&m&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:m})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Description"}),e.jsx("textarea",{...a("desc",{required:{value:!0,message:"Please enter a description"},maxLength:{value:300,message:"Must not exceed 300 characters"}}),type:"text",id:"description",placeholder:"blog description",className:"bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""}),e.jsx("p",{className:"text-red-500 text-sm mt-2",children:(u=r.errors.desc)==null?void 0:u.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"content",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Content"}),e.jsx("textarea",{...a("content",{required:{value:!0,message:"Please enter your content"},maxLength:{value:1e3,message:"Must not exceed 1000 characters"}}),type:"text",name:"content",id:"content",placeholder:"Blog Content",className:"bg-gray-50 border border-gray-300 h-28 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",required:""}),e.jsx("p",{className:"text-red-500 text-sm mt-2",children:(g=r.errors.content)==null?void 0:g.message})]}),e.jsx("button",{type:"submit",className:"w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:"Create Post"})]})]})};export{S as default};
